<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="KickRoll.App.Views.MembersListPage"
             Title="成員列表">

    <Grid>
        <VerticalStackLayout Padding="20" Spacing="10">
            <CollectionView x:Name="MembersCollection">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="Gray" CornerRadius="8" Padding="10" Margin="0,5">
                            <VerticalStackLayout>
                                <!-- 姓名 -->
                                <Label Text="{Binding Name, TargetNullValue='(未命名)', FallbackValue='(未命名)'}"
                                       FontSize="18" FontAttributes="Bold"/>

                                <!-- 狀態 -->
                                <Label Text="{Binding Status, TargetNullValue='unknown', FallbackValue='unknown'}"
                                       FontSize="14" TextColor="Gray"/>

                                <!-- ✅ 顯示所屬隊伍 (逗號分隔) -->
                                <Label Text="{Binding TeamNames, TargetNullValue='(未分配隊伍)', FallbackValue='(未分配隊伍)'}"
                                       FontSize="14" TextColor="DarkSlateBlue"/>

                                <!-- Action buttons -->
                                <HorizontalStackLayout Spacing="10" Margin="0,10,0,0">
                                    <Button Text="編輯" 
                                            BackgroundColor="Blue" 
                                            TextColor="White" 
                                            FontSize="12"
                                            Clicked="OnEditMemberClicked"
                                            CommandParameter="{Binding .}" />
                                    
                                    <Button Text="查看報名" 
                                            BackgroundColor="Green" 
                                            TextColor="White" 
                                            FontSize="12"
                                            Clicked="OnViewEnrollmentsClicked"
                                            CommandParameter="{Binding .}" />
                                            
                                    <Button Text="管理方案" 
                                            BackgroundColor="Orange" 
                                            TextColor="White" 
                                            FontSize="12"
                                            Clicked="OnManagePlansClicked"
                                            CommandParameter="{Binding .}" />
                                </HorizontalStackLayout>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
            <Label x:Name="ResultLabel" TextColor="Red"/>
        </VerticalStackLayout>

        <!-- Floating Action Button -->
        <Button x:Name="AddMemberFab" 
                Text="+" 
                Clicked="OnAddMemberFabClicked"
                BackgroundColor="#2196F3" 
                TextColor="White"
                FontSize="24"
                FontAttributes="Bold"
                WidthRequest="56" 
                HeightRequest="56" 
                CornerRadius="28"
                HorizontalOptions="End" 
                VerticalOptions="End" 
                Margin="20,20,20,20" />
    </Grid>
</ContentPage>

